---
title: 界面
date: 2021-07-27 07:53:19
permalink: /pages/6771d3/
categories:
  - 插件开发
  - 快速入门
tags:
  - 
---

> 界面功能应该是用的最多的一个功能，包括侧边栏，更多功能等部分全部都在这里

> 记得在auth里面加上 `widget`

界面函数主要包括添加侧边栏，添加界面和添加设置界面设置，这里我一个一个来进行介绍

## 添加侧边栏

这里我也懒得写例子了，这里就拿个人信息卡片来进行举例吧~效果如下

![image-20210730082712987](https://img.xiaoyou66.com/2021/07/30/1b5867f5c9967.png)

首先我们需要自己写好样式和html

![image-20210730082855090](https://img.xiaoyou66.com/2021/07/30/a37812a43b51e.png)

大家写的时候按照下面这个规范来，因为我后续应该会直接从style里面提取css样式

![image-20210730082947849](https://img.xiaoyou66.com/2021/07/30/5027fe0c408d9.png)

当然如果只能是静态的肯定是不够的，我们可以在里面插入一些动态数据，这里就需要用到模板引擎了

我在知乎上随便找了一篇文章[GO语言模板引擎 GO语言标准库http/template - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/299048675)，更详细的请自己参考官方文档

比如我这里就用到了两语法，第一个是显示变量

![image-20210730083435490](https://img.xiaoyou66.com/2021/07/30/4ef7311bf6211.png)



第二个就是判断，如果bili这个变量不为空，那么我们就显示if里面的内容，如果为空就不显示

![image-20210730083904528](https://img.xiaoyou66.com/2021/07/30/eeb4e771faf71.png)



界面写完了还不够，我们还需要去注册一下这个界面才行，比如我这个插件的代码如下

```JavaScript
// 使用博客系统提供的接口
const widget =xBlog.widget
const database =xBlog.database
const tools =xBlog.tools

// 一些字段
const dbArticle = "article"
const dbComment = "comment"
const keyIntroduce = "my_introduce"
const keyBackground = "my_background"
const keyAvatar = "my_avatar"
const keyGithub = "my_github"
const keyTelegram = "my_telegram"
const keyTwitter = "my_twitter"
const keyZhiHu = "my_zhi_hu"
const keySteam = "my_steam"
const keyBili = "my_bili_bili"

// 添加卡片
widget.addSide("","index.html",function () {
    // 初始化数据库链接
    let db = database.newDb(dbArticle)
    let commentDb = database.newDb(dbComment)
    return {
        background: tools.getSetting(keyBackground),
        avatar: tools.getSetting(keyAvatar),
        post: db.GetCount({"status": "publish", "post_type": "post"}),
        diary: db.GetCount({"status": "publish", "post_type": "diary"}),
        comment: commentDb.GetCount({}),
        introduce: tools.getSetting(keyIntroduce),
        bili: tools.getSetting(keyBili),
        github: tools.getSetting(keyGithub),
        twitter: tools.getSetting(keyTwitter),
        telegram: tools.getSetting(keyTelegram),
        steam: tools.getSetting(keySteam),
        zhiHu: tools.getSetting(keyZhiHu)
    }
},true)
```

`addSide`这个函数有三个参数，第一个是标题，如果没有的话就不会显示，如果加了标题的话就是下面这个效果

![image-20210730084533342](https://img.xiaoyou66.com/2021/07/30/997da5879a287.png)

第二个参数是html文件的名字，因为我的设置的就是`index.html`所以这里填`index.html`

第三参数就是回调函数，因为侧边栏有些数据是要实时刷新的，所以我们需要通过回调函数返回变量，返回的变量就可以直接在html上显示出来了。如果你那个是纯静态的，然就不需要回调函数

这里我使用了 `tools.getSetting` 可以从数据库中获取设置信息。

![image-20210730085720525](https://img.xiaoyou66.com/2021/07/30/ef31be81a0e66.png)

第三个参数是是否开启调试，其实用的不多，大家不用管

重载插件后，自己可以到侧边栏设置哪里可以看到自己注册的侧边栏信息，自己记得拖动到对应的侧边栏，这样才能使用哦！

![image-20210730085918543](https://img.xiaoyou66.com/2021/07/30/bc884353b5f47.png)

## 添加界面







## 添加设置
